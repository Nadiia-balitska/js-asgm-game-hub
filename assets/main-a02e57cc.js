(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function e(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=e(t);fetch(t.href,r)}})();(()=>{const o=document.querySelector(".js-menu-container"),n=document.querySelector(".js-open-menu"),e=document.querySelector(".js-close-menu"),a=document.querySelectorAll(".link"),t=()=>{const r=n.getAttribute("aria-expanded")==="true"||!1;n.setAttribute("aria-expanded",!r),o.classList.toggle("is-open")};n.addEventListener("click",t),e.addEventListener("click",t),a.forEach(r=>{r.addEventListener("click",t)}),window.matchMedia("(min-width: 425px)").addEventListener("change",r=>{r.matches&&(o.classList.remove("is-open"),n.setAttribute("aria-expanded",!1))})})();const w="https://api.noroff.dev/api/v1/gamehub",l=document.getElementById("product_list"),u=document.getElementById("genreFilter");let d=[];async function E(){try{l.innerHTML="<p>Loading games...</p>",d=await(await fetch(w)).json(),g(d)}catch{l.innerHTML="<p>Failed to load games üò¢</p>"}}function g(o){if(l.innerHTML="",o.length===0){l.innerHTML="<p>No games found for this genre.</p>";return}o.forEach(n=>{const e=`
      <div class="game_card">
        <img src="${n.image}" alt="${n.title}" width="300px" class="game_img" />
        <h3 class="game_title">${n.title}</h3>
        <p class="game_price">${n.price} NOK</p>
        <a href="/details.html?id=${n.id}" class="details_button" >Details</a>
      </div>
    `;l.innerHTML+=e})}u&&u.addEventListener("change",()=>{const o=u.value;if(o==="all")g(d);else{const n=d.filter(e=>e.genre&&e.genre.toLowerCase()===o);g(n)}});E();const y="https://api.noroff.dev/api/v1/gamehub",p=document.querySelector(".swiper-wrapper");async function b(){try{const n=await(await fetch(y)).json();console.log("Fetched game IDs:",n);const e=await Promise.all(n.map(async t=>await(await fetch(`${y}/${t.id}`)).json()));console.log("Detailed games:",e);const a=e.slice(0,10);p.innerHTML="",a.forEach(t=>{const r=document.createElement("li");r.classList.add("swiper-slide"),r.innerHTML=`
        <a href="/details.html?id=${t.id}">
          <img class="swiper-img" src="${t.image}" alt="${t.title}" />
        </a>
      `,p.appendChild(r)}),new Swiper(".swiper-container",{loop:!0,autoplay:{delay:2e3},slidesPerView:2,navigation:{nextEl:".custom-next",prevEl:".custom-prev"},allowTouchMove:!0,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{425:{slidesPerView:2},767:{slidesPerView:4},1024:{slidesPerView:6},1440:{slidesPerView:8}}})}catch(o){console.error("‚ùå Failed to load popular games:",o),p.innerHTML="<li>Failed to load games üò¢</li>"}}b();document.addEventListener("DOMContentLoaded",()=>{const o="https://api.noroff.dev/api/v1/gamehub",e=new URLSearchParams(window.location.search).get("id"),a=document.getElementById("add-to-cart");if(!e){document.querySelector(".details").innerHTML="<p>Product not found.</p>";return}t(e);async function t(i){try{const c=await(await fetch(`${o}/${i}`)).json();document.getElementById("product-title").textContent=c.title,document.getElementById("product-price").textContent=`Price: ${c.price} NOK`,document.getElementById("product-description").textContent=c.description,document.getElementById("product-image").src=c.image,document.getElementById("product-image").alt=c.title,a&&a.addEventListener("click",()=>{r(c)})}catch(s){console.error("Error loading product:",s),document.querySelector(".details").innerHTML="<p>Failed to load product details.</p>"}}function r(i){const s=JSON.parse(localStorage.getItem("cart"))||[];s.find(v=>v.id===String(i.id))?alert("üõí Product is already in your cart."):(s.push({id:String(i.id),title:i.title,price:i.price,image:i.image,quantity:1}),localStorage.setItem("cart",JSON.stringify(s)),alert("‚úÖ Product added to cart!"))}});const m=document.querySelector(".cart_list"),h=document.querySelector(".total_price_cart"),I=document.querySelector(".subtotal"),M=document.querySelector("#subtotal_btn");function f(){const o=JSON.parse(localStorage.getItem("cart"))||[];if(o.length===0){m.innerHTML='<p class="empty">Your cart is empty üõí</p>',h.textContent="Total price: 0 NOK";return}m.innerHTML="";let n=0;o.forEach(e=>{const a=document.createElement("li");a.classList.add("cart_item"),a.innerHTML=`
    <li class="cart_item">
     <img src="${e.image}" width="70" height="40" alt="${e.title}" class="cart_item_img" />
      <p class="item_name">${e.title}</p>
      <div class="amount_item">
  <button class="decrease" data-id="${e.id}">‚àí</button>
  <span>${e.quantity}</span>
  <button class="increase" data-id="${e.id}">+</button>
      </div>
      <p class="price_cart">${e.price*e.quantity} NOK</p>
      <button class="remove_btn" data-id="${e.id}">üóë</button>
    </li>
     
    `,m.appendChild(a),n+=e.price*e.quantity}),document.querySelectorAll(".increase").forEach(e=>{e.addEventListener("click",()=>{L(e.dataset.id,1)})}),document.querySelectorAll(".decrease").forEach(e=>{e.addEventListener("click",()=>{L(e.dataset.id,-1)})}),h.textContent=`Total price: ${n} NOK`,I.textContent=`${n} NOK`,M.textContent=`${n} NOK`,document.querySelectorAll(".remove_btn").forEach(e=>{e.addEventListener("click",a=>{const t=a.target.dataset.id;$(t)})})}function L(o,n){const e=JSON.parse(localStorage.getItem("cart"))||[],a=e.find(t=>t.id===o);if(a){if(a.quantity+=n,a.quantity<1){const t=e.filter(r=>r.id!==o);localStorage.setItem("cart",JSON.stringify(t))}else localStorage.setItem("cart",JSON.stringify(e));f()}}function $(o){let n=JSON.parse(localStorage.getItem("cart"))||[];n=n.filter(e=>e.id!==o),localStorage.setItem("cart",JSON.stringify(n)),f()}f();const S=document.getElementById("successModal"),O=document.getElementById("closeModalBtn"),q=document.querySelector(".card_checkout_btn");q.addEventListener("click",()=>{localStorage.removeItem("cart"),S.classList.remove("hidden")});O.addEventListener("click",()=>{S.classList.add("hidden"),window.location.href="index.html"});
//# sourceMappingURL=main-a02e57cc.js.map
